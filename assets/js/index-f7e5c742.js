import{i as F,h as R,j as f,k as N,l as D,m as O,n as b,p as U,q as X,s as Y,u as z,v as l,x as I,_ as W,r as E,o as g,e as C,f as V,c as M,w as j,y as x,z as B,A as L,B as q,F as K,a as $,C as Q,D as G}from"./index-18b1401e.js";const J=typeof window>"u";function Z(e){for(const t of e){const r=t.target.__resizeListeners__||[];r.length&&r.forEach(o=>{o()})}}function H(e,t){J||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new F(Z),e.__ro__.observe(e)),e.__resizeListeners__.push(t))}function T(e,t){!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}const ee={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function te({move:e,size:t,bar:r}){const o={},n=`translate${r.axis}(${e}%)`;return o[r.size]=t,o.transform=n,o.msTransform=n,o.webkitTransform=n,o}function ne(e,t){return Object.assign(e,t)}function re(e){const t={};for(let r=0;r<e.length;r++)e[r]&&ne(t,e[r]);return t}function k(e,t,r){e&&t&&r&&e.addEventListener(t,r,!1)}function A(e,t,r){e&&t&&r&&e.removeEventListener(t,r,!1)}const se=R({name:"Bar",props:{vertical:Boolean,size:String,move:Number},setup(e){const t=U(),r=f(),o=N("scroll-bar-wrap",{}),n=D(()=>ee[e.vertical?"vertical":"horizontal"]),s=f({}),a=f(),u=i=>{var d;i.ctrlKey||i.button===2||((d=window.getSelection())==null||d.removeAllRanges(),c(i),s.value[n.value.axis]=i.currentTarget[n.value.offset]-(i[n.value.client]-i.currentTarget.getBoundingClientRect()[n.value.direction]))},v=i=>{var p;const d=Math.abs(i.target.getBoundingClientRect()[n.value.direction]-i[n.value.client]),h=r.value[n.value.offset]/2,y=(d-h)*100/((p=t==null?void 0:t.vnode.el)==null?void 0:p[n.value.offset]);o.value[n.value.scroll]=y*o.value[n.value.scrollSize]/100},c=i=>{i.stopImmediatePropagation(),a.value=!0,k(document,"mousemove",_),k(document,"mouseup",m),document.onselectstart=()=>!1},_=i=>{var w,S;if(a.value===!1)return;const d=s.value[n.value.axis];if(!d)return;const h=(((w=t==null?void 0:t.vnode.el)==null?void 0:w.getBoundingClientRect()[n.value.direction])-i[n.value.client])*-1,y=r.value[n.value.offset]-d,p=(h-y)*100/((S=t==null?void 0:t.vnode.el)==null?void 0:S[n.value.offset]);o.value[n.value.scroll]=p*o.value[n.value.scrollSize]/100};function m(){a.value=!1,s.value[n.value.axis]=0,A(document,"mousemove",_),document.onselectstart=null}return O(()=>{A(document,"mouseup",m)}),()=>b("div",{class:["scrollbar__bar","is-"+n.value.key],onMousedown:v},b("div",{ref:r,class:"scrollbar__thumb",onMousedown:u,style:te({size:e.size,move:e.move,bar:n.value})}))}});const oe=R({name:"Scrollbar",components:{Bar:se},props:{native:{type:Boolean,default:!1},wrapStyle:{type:[String,Array],default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array],default:""},noresize:Boolean,tag:{type:String,default:"div"}},setup(e){const t=f("0"),r=f("0"),o=f(0),n=f(0),s=f(),a=f();X("scroll-bar-wrap",s);const u=D(()=>Array.isArray(e.wrapStyle)?re(e.wrapStyle):e.wrapStyle),v=()=>{e.native||(n.value=l(s).scrollTop*100/l(s).clientHeight,o.value=l(s).scrollLeft*100/l(s).clientWidth)},c=()=>{if(!l(s))return;const _=l(s).clientHeight*100/l(s).scrollHeight,m=l(s).clientWidth*100/l(s).scrollWidth;r.value=_<100?_+"%":"",t.value=m<100?m+"%":""};return Y(()=>{e.native||(z(c),e.noresize||(H(l(a),c),H(l(s),c),addEventListener("resize",c)))}),I(()=>{e.native||e.noresize||(T(l(a),c),T(l(s),c),removeEventListener("resize",c))}),{moveX:o,moveY:n,sizeWidth:t,sizeHeight:r,style:u,wrap:s,resize:a,update:c,handleScroll:v}}}),le={class:"scrollbar"};function ae(e,t,r,o,n,s){const a=E("bar");return g(),C("div",le,[V("div",{ref:"wrap",class:B([e.wrapClass,"scrollbar__wrap",e.native?"":"scrollbar__wrap--hidden-default"]),style:L(e.style),onScroll:t[0]||(t[0]=(...u)=>e.handleScroll&&e.handleScroll(...u))},[(g(),M(q(e.tag),{ref:"resize",class:B(["scrollbar__view",e.viewClass]),style:L(e.viewStyle)},{default:j(()=>[x(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?Q("",!0):(g(),C(K,{key:0},[$(a,{move:e.moveX,size:e.sizeWidth},null,8,["move","size"]),$(a,{vertical:"",move:e.moveY,size:e.sizeHeight},null,8,["move","size"])],64))])}const ie=W(oe,[["render",ae]]);function ce(e){return typeof e<"u"}function ue(e){return!ce(e)}function fe(e){return typeof e=="function"}const ve=(e,t,r,o)=>(e/=o/2,e<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)),de=(e,t)=>{e.scrollTop=t},_e=e=>e.scrollTop;function P({el:e,to:t,duration:r=500,callback:o}){const n=f(!1),s=_e(e),a=t-s,u=20;let v=0;r=ue(r)?500:r;const c=function(){if(!l(n))return;v+=u;const i=ve(v,s,a,r);de(e,i),v<r&&l(n)?requestAnimationFrame(c):o&&fe(o)&&o()};return{start:()=>{n.value=!0,c()},stop:()=>{n.value=!1}}}const me={name:"ScrollContainer",components:{Scrollbar:ie},setup(){const e=f(null);function t(n,s=500){const a=l(e);!a||z(()=>{const u=l(a.wrap);if(!u)return;const{start:v}=P({el:u,to:n,duration:s});v()})}function r(){const n=l(e);return n?n.wrap:null}function o(){const n=l(e);!n||z(()=>{const s=l(n.wrap);if(!s)return;const a=s.scrollHeight,{start:u}=P({el:s,to:a});u()})}return{scrollbarRef:e,scrollTo:t,scrollBottom:o,getScrollWrap:r}}};function pe(e,t,r,o,n,s){const a=E("Scrollbar");return g(),M(a,G({ref:"scrollbarRef",class:"scroll-container"},e.$attrs),{default:j(()=>[x(e.$slots,"default")]),_:3},16)}const he=W(me,[["render",pe]]);export{he as S};
//# sourceMappingURL=index-f7e5c742.js.map
